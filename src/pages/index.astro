---
import SiteLayout from '@/layouts/SiteLayout.astro';
import SectionHeading from '@/components/SectionHeading.astro';
import ProjectCard from '@/components/ProjectCard.astro';
import BlogCard from '@/components/BlogCard.astro';
import { fetchPosts } from '@/lib/hashnode';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).filter((project) => project.data.featured).slice(0, 3);
const posts = await fetchPosts(3);
---
<SiteLayout title="Home" description="Systems-oriented engineering work, projects, and writing.">
  <section class="section-block">
    <div class="grid gap-10 md:grid-cols-[1.2fr_0.8fr] items-center">
      <div class="space-y-6">
        <p class="text-xs uppercase tracking-[0.3em] text-base-400">Systems engineering</p>
        <h1 class="text-3xl md:text-4xl font-semibold tracking-tight text-base-950 dark:text-base-50">
          TODO: Short headline about building reliable production systems.
        </h1>
        <p class="text-base-600 dark:text-base-300 max-w-xl">
          TODO: 2–3 sentences that summarize your focus areas, constraints you care about, and the kinds of systems you build.
        </p>
        <div class="flex flex-wrap gap-3 text-sm">
          <a href="/projects" class="rounded-full border border-base-200 dark:border-base-800 px-4 py-2 hover:border-accent/60">View projects</a>
          <a href="/contact" class="rounded-full border border-base-200 dark:border-base-800 px-4 py-2 hover:border-accent/60">Get in touch</a>
        </div>
      </div>
      <div class="surface p-6 space-y-4">
        <h2 class="text-lg font-semibold text-base-950 dark:text-base-50">Now</h2>
        <ul class="space-y-3 text-sm text-base-600 dark:text-base-300">
          <li>TODO: Current role focus.</li>
          <li>TODO: Current system or product focus.</li>
          <li>TODO: Personal operating principle or constraint.</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="section-block">
    <SectionHeading title="Selected projects" subtitle="Three recent builds with clear constraints and outcomes." />
    <div class="mt-8 grid gap-6 md:grid-cols-3">
      {projects.map((project) => (
        <ProjectCard project={project} />
      ))}
    </div>
    <div class="mt-6">
      <a href="/projects" class="text-sm font-medium hover:text-accent">View all projects →</a>
    </div>
  </section>

  <section class="section-block">
    <SectionHeading title="Latest writing" subtitle="Posts from Hashnode, mirrored here for long-form reading." />
    <div class="mt-8 grid gap-6 md:grid-cols-3">
      {posts.map((post) => (
        <BlogCard post={post} />
      ))}
    </div>
    <div class="mt-6">
      <a href="/blog" class="text-sm font-medium hover:text-accent">All posts →</a>
    </div>
  </section>
</SiteLayout>
